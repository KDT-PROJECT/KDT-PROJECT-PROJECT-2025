-- =====================================================
-- TASK-002: MySQL 스키마 시드 데이터
-- 파일: schema/0003_seed.sql
-- 설명: 지역/업종 코드 시드 데이터 및 샘플 데이터
-- =====================================================

USE seoul_commercial;

-- =====================================================
-- 1. 지역 시드 데이터 (서울시 주요 상권 지역)
-- =====================================================

INSERT INTO regions (region_id, name, gu, dong, lat, lon, adm_code) VALUES
-- 강남구
(1, '강남구 역삼동', '강남구', '역삼동', 37.5000, 127.0333, '1168010100'),
(2, '강남구 테헤란로', '강남구', '역삼동', 37.5000, 127.0333, '1168010100'),
(3, '강남구 청담동', '강남구', '청담동', 37.5167, 127.0500, '1168010200'),
(4, '강남구 압구정동', '강남구', '압구정동', 37.5167, 127.0333, '1168010300'),
(5, '강남구 신사동', '강남구', '신사동', 37.5167, 127.0167, '1168010400'),

-- 서초구
(6, '서초구 서초동', '서초구', '서초동', 37.4833, 127.0167, '1168010500'),
(7, '서초구 반포동', '서초구', '반포동', 37.5000, 127.0000, '1168010600'),
(8, '서초구 방배동', '서초구', '방배동', 37.4833, 126.9833, '1168010700'),

-- 송파구
(9, '송파구 잠실동', '송파구', '잠실동', 37.5167, 127.1000, '1171010100'),
(10, '송파구 문정동', '송파구', '문정동', 37.4833, 127.1167, '1171010200'),
(11, '송파구 가락동', '송파구', '가락동', 37.5000, 127.1167, '1171010300'),

-- 강동구
(12, '강동구 천호동', '강동구', '천호동', 37.5500, 127.1333, '1174010100'),
(13, '강동구 성내동', '강동구', '성내동', 37.5333, 127.1167, '1174010200'),

-- 중구
(14, '중구 명동', '중구', '명동', 37.5667, 126.9833, '1114010100'),
(15, '중구 을지로', '중구', '을지로동', 37.5667, 126.9833, '1114010200'),
(16, '중구 동대문', '중구', '동대문동', 37.5667, 127.0000, '1114010300'),

-- 종로구
(17, '종로구 인사동', '종로구', '인사동', 37.5667, 126.9833, '1111010100'),
(18, '종로구 청계천', '종로구', '청계천', 37.5667, 126.9833, '1111010200'),
(19, '종로구 삼청동', '종로구', '삼청동', 37.5833, 126.9833, '1111010300'),

-- 마포구
(20, '마포구 홍대', '마포구', '서교동', 37.5500, 126.9167, '1144010100'),
(21, '마포구 상수동', '마포구', '상수동', 37.5500, 126.9167, '1144010200'),
(22, '마포구 합정동', '마포구', '합정동', 37.5500, 126.9000, '1144010300'),

-- 용산구
(23, '용산구 이태원', '용산구', '이태원동', 37.5333, 126.9833, '1117010100'),
(24, '용산구 한남동', '용산구', '한남동', 37.5333, 127.0000, '1117010200'),

-- 영등포구
(25, '영등포구 여의도', '영등포구', '여의도동', 37.5167, 126.9167, '1156010100'),
(26, '영등포구 당산동', '영등포구', '당산동', 37.5167, 126.9000, '1156010200'),

-- 성동구
(27, '성동구 성수동', '성동구', '성수동', 37.5500, 127.0500, '1120010100'),
(28, '성동구 왕십리', '성동구', '왕십리동', 37.5500, 127.0333, '1120010200'),

-- 광진구
(29, '광진구 건대', '광진구', '구의동', 37.5500, 127.0833, '1121510100'),
(30, '광진구 아차산', '광진구', '자양동', 37.5500, 127.0833, '1121510200')

ON DUPLICATE KEY UPDATE
    name = VALUES(name),
    gu = VALUES(gu),
    dong = VALUES(dong),
    lat = VALUES(lat),
    lon = VALUES(lon),
    adm_code = VALUES(adm_code),
    updated_at = CURRENT_TIMESTAMP;

-- =====================================================
-- 2. 업종 시드 데이터 (한국표준산업분류 기반)
-- =====================================================

INSERT INTO industries (industry_id, name, nace_kor) VALUES
-- 음식점업
(1, '한식', '56111'),
(2, '중식', '56112'),
(3, '일식', '56113'),
(4, '양식', '56114'),
(5, '기타 외국식', '56119'),
(6, '패스트푸드', '56120'),
(7, '카페', '56130'),
(8, '기타 음식점', '56190'),

-- 소매업
(9, '의류소매', '47110'),
(10, '신발소매', '47120'),
(11, '가방소매', '47130'),
(12, '화장품소매', '47140'),
(13, '기타 개인용품소매', '47190'),
(14, '가전제품소매', '47510'),
(15, '컴퓨터소매', '47520'),
(16, '가구소매', '47530'),
(17, '기타 가정용품소매', '47590'),

-- 서비스업
(18, '미용업', '96010'),
(19, '목욕업', '96020'),
(20, '세탁업', '96030'),
(21, '기타 개인서비스업', '96090'),
(22, '운동시설업', '93110'),
(23, '오락시설업', '93120'),
(24, '문화시설업', '93130'),

-- 숙박업
(25, '호텔업', '55110'),
(26, '펜션업', '55120'),
(27, '기타 숙박업', '55190'),

-- 교통업
(28, '택시운송업', '49320'),
(29, '버스운송업', '49310'),
(30, '기타 육상운송업', '49390')

ON DUPLICATE KEY UPDATE
    name = VALUES(name),
    nace_kor = VALUES(nace_kor),
    updated_at = CURRENT_TIMESTAMP;

-- =====================================================
-- 3. 샘플 매출 데이터 (2024년 1월 데이터)
-- =====================================================

-- 2024년 1월 1일 데이터
INSERT INTO sales_2024 (region_id, industry_id, date, sales_amt, sales_cnt, visitors) VALUES
-- 강남구 역삼동
(1, 1, '2024-01-01', 15000000, 150, 200),  -- 한식
(1, 7, '2024-01-01', 8000000, 200, 300),   -- 카페
(1, 9, '2024-01-01', 12000000, 80, 120),   -- 의류소매

-- 강남구 테헤란로
(2, 4, '2024-01-01', 20000000, 100, 150),  -- 양식
(2, 7, '2024-01-01', 10000000, 250, 400),  -- 카페
(2, 15, '2024-01-01', 18000000, 60, 90),   -- 컴퓨터소매

-- 서초구 서초동
(6, 1, '2024-01-01', 12000000, 120, 180),  -- 한식
(6, 7, '2024-01-01', 6000000, 150, 250),   -- 카페
(6, 18, '2024-01-01', 5000000, 100, 150),  -- 미용업

-- 송파구 잠실동
(9, 1, '2024-01-01', 18000000, 180, 250),  -- 한식
(9, 3, '2024-01-01', 15000000, 120, 180),  -- 일식
(9, 9, '2024-01-01', 16000000, 100, 150),  -- 의류소매

-- 중구 명동
(14, 1, '2024-01-01', 10000000, 100, 150), -- 한식
(14, 3, '2024-01-01', 12000000, 100, 150), -- 일식
(14, 9, '2024-01-01', 14000000, 90, 130),  -- 의류소매

-- 마포구 홍대
(20, 1, '2024-01-01', 8000000, 80, 120),   -- 한식
(20, 7, '2024-01-01', 7000000, 180, 280),  -- 카페
(20, 9, '2024-01-01', 10000000, 70, 100),  -- 의류소매

-- 용산구 이태원
(23, 4, '2024-01-01', 16000000, 80, 120),  -- 양식
(23, 7, '2024-01-01', 9000000, 200, 320),  -- 카페
(23, 18, '2024-01-01', 6000000, 120, 180), -- 미용업

-- 영등포구 여의도
(25, 1, '2024-01-01', 14000000, 140, 200), -- 한식
(25, 7, '2024-01-01', 8000000, 200, 300),  -- 카페
(25, 9, '2024-01-01', 12000000, 80, 120),  -- 의류소매

-- 성동구 성수동
(27, 1, '2024-01-01', 11000000, 110, 160), -- 한식
(27, 7, '2024-01-01', 7500000, 190, 290),  -- 카페
(27, 9, '2024-01-01', 13000000, 85, 125),  -- 의류소매

-- 광진구 건대
(29, 1, '2024-01-01', 9000000, 90, 130),   -- 한식
(29, 7, '2024-01-01', 6500000, 170, 270),  -- 카페
(29, 9, '2024-01-01', 11000000, 75, 110)   -- 의류소매

ON DUPLICATE KEY UPDATE
    sales_amt = VALUES(sales_amt),
    sales_cnt = VALUES(sales_cnt),
    visitors = VALUES(visitors),
    updated_at = CURRENT_TIMESTAMP;

-- =====================================================
-- 4. 샘플 특성 데이터
-- =====================================================

INSERT INTO features (region_id, industry_id, feat_json) VALUES
(1, 1, '{"avg_price": 10000, "peak_hours": ["12:00-14:00", "18:00-20:00"], "customer_type": "office_workers"}'),
(1, 7, '{"avg_price": 5000, "peak_hours": ["08:00-10:00", "14:00-16:00"], "customer_type": "students"}'),
(2, 4, '{"avg_price": 25000, "peak_hours": ["19:00-21:00"], "customer_type": "business"}'),
(9, 1, '{"avg_price": 12000, "peak_hours": ["12:00-14:00", "18:00-20:00"], "customer_type": "families"}'),
(20, 7, '{"avg_price": 4000, "peak_hours": ["20:00-24:00"], "customer_type": "young_adults"}')

ON DUPLICATE KEY UPDATE
    feat_json = VALUES(feat_json),
    updated_at = CURRENT_TIMESTAMP;

-- =====================================================
-- 5. 샘플 문서 데이터
-- =====================================================

INSERT INTO docs (title, source, url, published_date, meta_json, content) VALUES
('2024년 서울 상권 분석 보고서', '서울시청', 'https://seoul.go.kr/report/2024', '2024-01-15', 
 '{"author": "서울시청", "category": "official_report"}', 
 '2024년 서울 상권의 주요 트렌드와 분석 결과를 담은 공식 보고서입니다.'),

('강남구 상권 활성화 방안', '강남구청', 'https://gangnam.go.kr/policy/2024', '2024-01-20',
 '{"author": "강남구청", "category": "policy_document"}',
 '강남구 상권의 활성화를 위한 정책 방안과 실행 계획을 제시합니다.'),

('서울시 소상공인 지원 정책', '서울시청', 'https://seoul.go.kr/support/2024', '2024-01-25',
 '{"author": "서울시청", "category": "support_policy"}',
 '서울시 소상공인을 위한 다양한 지원 정책과 혜택을 안내합니다.')

ON DUPLICATE KEY UPDATE
    title = VALUES(title),
    source = VALUES(source),
    url = VALUES(url),
    published_date = VALUES(published_date),
    meta_json = VALUES(meta_json),
    content = VALUES(content),
    updated_at = CURRENT_TIMESTAMP;

-- =====================================================
-- 완료 메시지
-- =====================================================
SELECT 'Schema 0003_seed.sql applied successfully' AS status;

