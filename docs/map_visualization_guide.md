# 서울 상권 지도 시각화 가이드

## 📋 개요

서울 상권 분석을 위한 Google Maps API 기반 지도 시각화 기능입니다. 상권 데이터를 지도상에 마커와 히트맵으로 표시하여 직관적인 분석을 제공합니다.

## 🚀 실행 방법


### 1. 독립 실행
```bash
python run_map_app.py
```

### 2. 직접 실행
```bash
streamlit run app_map.py --server.port 8502
```

## 🗺️ 주요 기능

### 1. 지도 시각화
- **마커 표시**: 상권별 매출액에 따른 색상과 크기로 구분
- **히트맵**: 상권 밀도와 매출액을 색상으로 표시
- **구별 경계**: 서울 25개 구의 경계선 표시

### 2. 데이터 분석
- **구별 분석**: 구별 총 매출액, 평균 매출액, 상권 수 분석
- **차트 시각화**: 막대 차트, 파이 차트로 데이터 시각화
- **상위 상권**: 매출액 기준 상위 상권 표시

### 3. 인터랙티브 기능
- **지도 확대/축소**: 마우스 휠로 지도 확대/축소
- **마커 클릭**: 상권 상세 정보 팝업
- **레이어 전환**: 마커/히트맵 레이어 토글

## 📊 샘플 데이터

기본적으로 다음 샘플 데이터를 제공합니다:

| 상권명 | 구 | 업종 | 매출액 | 거래건수 |
|--------|----|----|--------|----------|
| 강남역 상권 | 강남구 | 소매업 | 15억 | 5,000건 |
| 홍대 상권 | 마포구 | 음식점업 | 8억 | 3,000건 |
| 명동 상권 | 중구 | 소매업 | 12억 | 4,000건 |
| 잠실 상권 | 송파구 | 소매업 | 9억 | 3,500건 |
| 건대 상권 | 광진구 | 음식점업 | 6억 | 2,500건 |

## 🔧 설정

### Google Maps API 키 설정
1. `.env` 파일에 API 키 추가:
```
GOOGLE_MAPS_API_KEY=your_google_maps_api_key
```

2. Google Cloud Console에서 Maps JavaScript API 활성화

### 데이터 연동
- SQL 분석 결과를 지도에 표시하려면 `st.session_state.last_sql_df`에 데이터가 있어야 합니다.
- 샘플 데이터 대신 실제 데이터를 사용하려면 "샘플 데이터 사용" 체크박스를 해제하세요.

## 📈 마커 색상 기준

- **빨간색**: 10억원 이상 (대형 상권)
- **주황색**: 5억원 이상 (중형 상권)
- **노란색**: 1억원 이상 (소형 상권)
- **초록색**: 1억원 미만 (소규모 상권)

## 🎯 사용 시나리오

### 1. 상권 밀도 분석
- 히트맵을 활성화하여 상권 밀도 확인
- 구별 상권 분포 파악

### 2. 매출액 분석
- 마커 크기와 색상으로 매출액 비교
- 구별 총 매출액 차트로 성과 분석

### 3. 업종별 분석
- 팝업에서 업종 정보 확인
- 업종별 상권 분포 파악

## 🔍 문제 해결

### 지도가 표시되지 않는 경우
1. 인터넷 연결 확인
2. 방화벽 설정 확인
3. 브라우저에서 JavaScript 활성화 확인

### API 키 오류
1. Google Cloud Console에서 API 활성화 확인
2. API 키 권한 설정 확인
3. 결제 정보 등록 확인

### 데이터가 표시되지 않는 경우
1. 샘플 데이터 사용 체크박스 확인
2. SQL 분석 결과가 있는지 확인
3. 데이터 형식이 올바른지 확인

## 📝 확장 가능성

- 실시간 데이터 연동
- 더 많은 상권 데이터 추가
- 시간별/월별 변화 시각화
- 상권 경쟁 분석 기능
- 투자 추천 시스템
